<div class="d-flex justify-content-between align-items-center mb-4">
  <h2><i class="fas fa-blog"></i> <%= blog.id ? 'Edit' : 'Write New' %> Blog Post</h2>
  <a href="/admin/blog" class="btn btn-outline-secondary">
    <i class="fas fa-arrow-left"></i> Back to Blog
  </a>
</div>

<div class="admin-card">
  <div class="card-body">
    <form action="<%= action %>" method="POST">
      <% if (method === 'PUT') { %>
      <input type="hidden" name="_method" value="PUT">
      <% } %>

      <div class="row">
        <div class="col-md-8">
          <div class="mb-3">
            <label for="title" class="form-label">Post Title *</label>
            <input
              type="text"
              class="form-control"
              id="title"
              name="title"
              value="<%= blog.title || '' %>"
              required
            />
          </div>

          <div class="mb-3">
            <label for="excerpt" class="form-label">Excerpt *</label>
            <textarea
              class="form-control"
              id="excerpt"
              name="excerpt"
              rows="3"
              placeholder="Brief description of the blog post..."
              required
            ><%= blog.excerpt || '' %></textarea>
          </div>

          <div class="mb-3">
            <label for="content" class="form-label">Content *</label>
            <textarea
              class="form-control"
              id="content"
              name="content"
              rows="15"
              placeholder="Write your blog post content here..."
              required
            ><%= blog.content || '' %></textarea>
          </div>
        </div>

        <div class="col-md-4">
          <div class="mb-3">
            <label for="category" class="form-label">Category *</label>
            <select class="form-select" id="category" name="category" required>
              <option value="">Select Category</option>
              <option value="technology" <%= blog.category === 'technology' ? 'selected' : '' %>>Technology</option>
              <option value="web-development" <%= blog.category === 'web-development' ? 'selected' : '' %>>Web Development</option>
              <option value="programming" <%= blog.category === 'programming' ? 'selected' : '' %>>Programming</option>
              <option value="tutorials" <%= blog.category === 'tutorials' ? 'selected' : '' %>>Tutorials</option>
              <option value="career" <%= blog.category === 'career' ? 'selected' : '' %>>Career</option>
              <option value="personal" <%= blog.category === 'personal' ? 'selected' : '' %>>Personal</option>
              <option value="other" <%= blog.category === 'other' ? 'selected' : '' %>>Other</option>
            </select>
          </div>

          <div class="mb-3">
            <label for="status" class="form-label">Status</label>
            <select class="form-select" id="status" name="status">
              <option value="draft" <%= blog.status === 'draft' ? 'selected' : '' %>>Draft</option>
              <option value="published" <%= blog.status === 'published' ? 'selected' : '' %>>Published</option>
              <option value="archived" <%= blog.status === 'archived' ? 'selected' : '' %>>Archived</option>
            </select>
          </div>

          <div class="mb-3">
            <label for="tags" class="form-label">Tags</label>
            <input
              type="text"
              class="form-control"
              id="tags"
              name="tags"
              value="<%= Array.isArray(blog.tags) ? blog.tags.join(', ') : blog.tags || '' %>"
              placeholder="javascript, react, tutorial"
            />
            <div class="form-text">Separate tags with commas</div>
          </div>

          <div class="mb-3">
            <label for="readTime" class="form-label">Read Time (minutes)</label>
            <input
              type="number"
              class="form-control"
              id="readTime"
              name="readTime"
              value="<%= blog.readTime || 5 %>"
              min="1"
              max="60"
            />
          </div>

          <div class="mb-3">
            <label for="metaDescription" class="form-label">Meta Description</label>
            <textarea
              class="form-control"
              id="metaDescription"
              name="metaDescription"
              rows="3"
              maxlength="160"
              placeholder="SEO meta description (max 160 characters)"
            ><%= blog.metaDescription || '' %></textarea>
          </div>

          <div class="form-check mb-3">
            <input
              class="form-check-input"
              type="checkbox"
              id="featured"
              name="featured"
              value="true"
              <%= blog.featured ? 'checked' : '' %>
            />
            <label class="form-check-label" for="featured">
              <i class="fas fa-star text-warning"></i> Featured Post
            </label>
          </div>
        </div>
      </div>

      <div class="d-flex justify-content-end gap-2">
        <a href="/admin/blog" class="btn btn-outline-secondary">Cancel</a>
        <button type="submit" name="status" value="draft" class="btn btn-outline-warning">
          <i class="fas fa-save"></i> Save as Draft
        </button>
        <button type="submit" name="status" value="published" class="btn btn-admin-primary">
          <i class="fas fa-paper-plane"></i> <%= blog.id ? 'Update' : 'Publish' %> Post
        </button>
      </div>
    </form>
  </div>
</div>