<div class="d-flex justify-content-between align-items-center mb-4">
  <h2><i class="fas fa-chart-bar"></i> Skills Management</h2>
  <a href="/admin/skills/new" class="btn btn-admin-primary">
    <i class="fas fa-plus"></i> Add New Skill
  </a>
</div>

<div class="admin-card">
  <div class="card-header bg-transparent border-0 py-3">
    <div class="row align-items-center">
      <div class="col">
        <h6 class="mb-0">Total Skills: <%= totalCount %></h6>
      </div>
    </div>
  </div>

  <% if (Object.keys(groupedSkills).length > 0) { %>
  <div class="card-body">
    <% Object.keys(groupedSkills).forEach(function(category) { %>
    <div class="mb-4">
      <h5 class="text-capitalize mb-3">
        <i
          class="fas fa-<%= category === 'frontend' ? 'laptop-code' : category === 'backend' ? 'server' : category === 'database' ? 'database' : 'tools' %>"
        ></i>
        <%= category.replace('-', ' ') %> (<%= groupedSkills[category].length
        %>)
      </h5>

      <div class="table-responsive">
        <table class="table table-sm">
          <thead>
            <tr>
              <th>Skill</th>
              <th>Proficiency</th>
              <th>Experience</th>
              <th>Visible</th>
              <th>Order</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody>
            <% groupedSkills[category].forEach(function(skill) { %>
            <tr>
              <td>
                <div class="d-flex align-items-center">
                  <% if (skill.icon) { %>
                  <i
                    class="<%= skill.icon %> me-2"
                    style="color: <%= skill.color %>"
                  ></i>
                  <% } %>
                  <div>
                    <h6 class="mb-0"><%= skill.name %></h6>
                    <% if (skill.description) { %>
                    <small class="text-muted"
                      ><%= skill.description.substring(0, 40) %>...</small
                    >
                    <% } %>
                  </div>
                </div>
              </td>
              <td>
                <div class="d-flex align-items-center">
                  <div class="progress me-2" style="width: 80px; height: 6px">
                    <div
                      class="progress-bar"
                      style="
                        width: <%= skill.proficiency %>%;
                        background-color: <%= skill.color %>;
                      "
                    ></div>
                  </div>
                  <small><%= skill.proficiency %>%</small>
                </div>
              </td>
              <td>
                <small
                  ><%= skill.yearsOfExperience %> year<%=
                  skill.yearsOfExperience !== 1 ? 's' : '' %></small
                >
              </td>
              <td>
                <% if (skill.isVisible) { %>
                <i class="fas fa-eye text-success"></i>
                <% } else { %>
                <i class="fas fa-eye-slash text-muted"></i>
                <% } %>
              </td>
              <td>
                <span class="badge bg-light text-dark"><%= skill.order %></span>
              </td>
              <td>
                <div class="btn-group btn-group-sm">
                  <a
                    href="/admin/skills/<%= skill.id %>/edit"
                    class="btn btn-outline-primary"
                    title="Edit"
                  >
                    <i class="fas fa-edit"></i>
                  </a>
                  <form
                    action="/admin/skills/<%= skill.id %>?_method=DELETE"
                    method="POST"
                    class="d-inline"
                    onsubmit="return confirm('Are you sure you want to delete this skill?')"
                  >
                    <button
                      type="submit"
                      class="btn btn-outline-danger"
                      title="Delete"
                    >
                      <i class="fas fa-trash"></i>
                    </button>
                  </form>
                </div>
              </td>
            </tr>
            <% }); %>
          </tbody>
        </table>
      </div>
    </div>
    <% }); %>
  </div>
  <% } else { %>
  <div class="card-body text-center py-5">
    <div class="mb-3">
      <i class="fas fa-chart-bar fa-3x text-muted"></i>
    </div>
    <h5>No Skills Found</h5>
    <p class="text-muted">Start by adding your first skill.</p>
    <a href="/admin/skills/new" class="btn btn-admin-primary">
      <i class="fas fa-plus"></i> Add First Skill
    </a>
  </div>
  <% } %>
</div>
